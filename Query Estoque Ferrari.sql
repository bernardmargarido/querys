SELECT SB2.B2_COD ,SB6.SLDTERC , 
( SB2.B2_QATU - SB2.B2_QEMP - SB2.B2_RESERVA ) SLDB2 ,
( SB6.SLDTERC + SB2.B2_QATU - SB2.B2_QEMP - SB2.B2_RESERVA ) ESTOQUE
FROM
SB2010 SB2,
(
    SELECT SB6.B6_PRODUTO,SUM(NVL(SB6.B6_SALDO,0)) SLDTERC
    FROM 
    SB6010 SB6
    --INNER JOIN SB2010 SB2 ON SB2.B2_FILIAL = SB6.B6_FILIAL AND SB2.B2_COD = SB6.B6_PRODUTO AND SB2.B2_LOCAL = SB6.B6_LOCAL AND SB2.D_E_L_E_T_ = ' '
    WHERE
    SB6.B6_FILIAL = '01' AND 
    SB6.B6_PRODUTO BETWEEN ' ' AND 'ZZZZZZ' AND 
    SB6.B6_SALDO > 0   AND 
    SB6.B6_ATEND = ' ' AND 
    SB6.B6_CLIFOR = '002697' AND 
    SB6.B6_LOJA = '01' AND 
    SB6.B6_LOCAL= '01' AND 
    SB6.D_E_L_E_T_ = ' '
    GROUP BY B6_PRODUTO
    ORDER BY B6_PRODUTO 
) SB6
WHERE 
SB2.B2_FILIAL = '01' AND 
SB2.B2_COD = SB6.B6_PRODUTO AND
SB2.B2_LOCAL = '01' AND
SB2.D_E_L_E_T_ = ' '  
ORDER BY B2_COD

--NVL( ( SB6.B6_SALDO + SB2.B2_QATU - SB2.B2_QEMP - SB2.B2_RESERVA ),0) SLDB2